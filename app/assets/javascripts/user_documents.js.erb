$(document).ready(function() {

  // Here???
  // UnobtrusiveFlash.flashOptions['timeout'] = 2000; // milliseconds

  $('.colorpicker').colorpicker();

  $(".documents li").on("click", function(){
    document_id = $(this).attr('id').match(/\d+/)[0];
    selected_document = $(this);

    $.ajax({
      url: "/documents/" + document_id + "/edit",
      type: 'GET',
      success: function(data){
        $('.colorpicker').colorpicker();

        // Remove selected from all documents.
        $(".documents li").removeClass("selected");

        // Add the selected class to the selected document.
        // $(this).addClass("selected")
        selected_document.addClass("selected")
      },
      failure: function(data){
        console.log('Failure in getting edit!');
      }
    });
  });

  $('#document_form').on('click', '#document_generate', function(e){
    e.preventDefault();
    $.fileDownload('/documents/generate_and_send.js', {
      httpMethod: "POST",
      data: $('#document_form form').serialize()
    });
  });
});
